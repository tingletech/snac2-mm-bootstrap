$(function(){store.enabled;var e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:[{value:"Anthony, Susan B"},{value:"Berkeley Free Church"},{value:"Bernstein, Leonard, 1918-"},{value:"Block, Herbert, 1909-2001"},{value:"Bush, Vannevar, 1890-1974"},{value:"Cha, Theresa Hak Kyung"},{value:"Feynman, Richard Phillips, 1918-1988"},{value:"Fitzgerald, Ella, 1918-1996"},{value:"Frankfurter, Felix, 1882-1965"},{value:"Franklin, Benjamin, 1706-1790"},{value:"Fuller, R. Buckminster (Richard Buckminster), 1895-1983"},{value:"Hamilton, Alexander, 1757-1804"},{value:"Luce, Clare Boothe, 1903-1987"},{value:"Oppenheimer, J. Robert, 1904-1967"},{value:"Patton family"},{value:"Patton, George S. (George Smith), 1885-1945"},{value:"Sontag, Susan, 1933-2004"},{value:"Washington, George, 1732-1799"},{value:"Whitman, Walt, 1819-1892"},{value:"Wright, Lloyd, 1890-1978"},{value:"Yamada, Mitsuye"}],remote:{url:"http://socialarchive.iath.virginia.edu/xtf/search?autocomplete=yes;term=%QUERY",ajax:{dataType:"jsonp"},filter:function(e){return $.map(e,function(e){return{value:e}})}}});e.initialize(),$("#userInput").typeahead({minLength:3,highlight:!0},{source:e.ttAdapter()}),$(".alphascroll a, .alphascroll li").tooltip(),$("label.advancedSearch").hide(),$("form.cpfSearch").hoverIntent(function(){$("label.advancedSearch").css("display","inline")},function(){"cpfdescription"===$("label.advancedSearch select").val()&&$("label.advancedSearch").fadeOut()});var a=!1;document.ontouchmove=function(e){a&&e.preventDefault()};var t=$("[data-snac-grid]");if(t.length){var n=new Slick.Data.RemoteModel(t.first().data("snac-grid")),i="",o=function(){},r=function(e,a,t,n,o){return s=i+"<a href='"+o.path.replace("default:","/xtf/view?docId=")+"'>"+o.identity+"</a>"},l=function(e,a,t,n,i){var o=i["facet-entityType"],r="";return"person"==o?r+='<span class="snac-icon-person"/>':"corporateBody"==o?r+='<span class="snac-icon-organization"/>':"family"==o&&(r+='<span class="snac-icon-family"/>'),"hasBiogHist"==i["facet-recordLevel"]&&(r+='<i class="B_icon"></i>'),i["facet-Wikipedia"]&&(r+='<i class="W_icon"></i>'),r},c=function(e,a,t,n,i){return out=i["count-ArchivalResource"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),out+"&#160;&#160;"},d=[{id:"identity",name:"Results",minWidth:400,sortable:!0,formatter:r,asyncPostRender:o},{id:"icons",name:"Record types",formatter:l,width:100,maxWidth:150},{id:"collections",name:"Related Collections",width:100,maxWidth:150,formatter:c,sortable:!0,cssClass:"right"}],u={editable:!0,enableAddRow:!1,enableColumnReorder:!1,forceFitColumns:!0,enableCellNavigation:!0,enableAsyncPostRender:!0},h=null;grid=new Slick.Grid("[data-snac-grid]",n.data,d,u),$(window).resize(function(){grid.resizeCanvas()}),grid.onViewportChanged.subscribe(function(){var e=grid.getViewport();n.ensureData(e.top,e.bottom)}),grid.onSort.subscribe(function(e,a){n.setSort(a.sortCol.field,a.sortAsc?1:-1);var t=grid.getViewport();n.ensureData(t.top,t.bottom)}),grid.onClick.subscribe(function(e,a){console.log(e,a)}),n.onDataLoading.subscribe(function(){if(!h){h=$("<span class='loading-indicator'><label>Buffering...</label></span>").appendTo(document.body);var e=t;h.css("position","absolute").css("top",e.position().top+e.height()/2-h.height()/2).css("left",e.position().left+e.width()/2-h.width()/2)}h.show()}),n.onDataLoaded.subscribe(function(e,a){for(var t=a.from;t<=a.to;t++)grid.invalidateRow(t);grid.updateRowCount(),grid.render(),h.fadeOut()}),grid.setSortColumn("identity",!0),grid.onViewportChanged.notify()}});