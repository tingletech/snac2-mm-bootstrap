$(function(){var e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:[{value:"Anthony, Susan B"},{value:"Berkeley Free Church"},{value:"Bernstein, Leonard, 1918-"},{value:"Block, Herbert, 1909-2001"},{value:"Bush, Vannevar, 1890-1974"},{value:"Cha, Theresa Hak Kyung"},{value:"Feynman, Richard Phillips, 1918-1988"},{value:"Fitzgerald, Ella, 1918-1996"},{value:"Frankfurter, Felix, 1882-1965"},{value:"Franklin, Benjamin, 1706-1790"},{value:"Fuller, R. Buckminster (Richard Buckminster), 1895-1983"},{value:"Hamilton, Alexander, 1757-1804"},{value:"Luce, Clare Boothe, 1903-1987"},{value:"Oppenheimer, J. Robert, 1904-1967"},{value:"Patton family"},{value:"Patton, George S. (George Smith), 1885-1945"},{value:"Sontag, Susan, 1933-2004"},{value:"Washington, George, 1732-1799"},{value:"Whitman, Walt, 1819-1892"},{value:"Wright, Lloyd, 1890-1978"},{value:"Yamada, Mitsuye"}],remote:{url:"http://socialarchive.iath.virginia.edu/xtf/search?autocomplete=yes;term=%QUERY",ajax:{dataType:"jsonp"},filter:function(e){return $.map(e,function(e){return{value:e}})}}});e.initialize(),$("#userInput").typeahead({minLength:3,highlight:!0},{source:e.ttAdapter()}),$(".alphascroll a, .alphascroll li").tooltip(),$("label.advancedSearch").hide(),$("form.cpfSearch").hoverIntent(function(){$("label.advancedSearch").css("display","inline")},function(){"cpfdescription"===$("label.advancedSearch select").val()&&$("label.advancedSearch").fadeOut()});var t=!1;document.ontouchmove=function(e){t&&e.preventDefault()};var n=$("[data-snac-grid]");if(n.length){var o=new Slick.Data.RemoteModel(n.first().data("snac-grid")),i=function(e,t,n,o,i){return s="â˜… <a href='"+i.path.replace("default:","/xtf/view?docId=")+"'>"+i.identity+"</a>"},r=function(e,t,n,o,i){var r=i["facet-entityType"],s="";return"person"==r?s+="&#x1F466; ":"corporateBody"==r?s+="&#x1F3E2; ":"family"==r&&(s+="&#x1F46A; "),"hasBiogHist"==i["facet-recordLevel"]&&(s+="&#x24B7; "),i["facet-Wikipedia"]&&(s+="&#x24CC; "),s},a=function(e,t,n,o,i){return out=i["count-ArchivalResource"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},l=[{id:"identity",name:"Results",formatter:i,minWidth:400},{id:"icons",name:"",formatter:r,width:100,maxWidth:150},{id:"icons",name:"related collections",formatter:a,width:100,maxWidth:150}],c={editable:!0,enableAddRow:!1,enableColumnReorder:!1,forceFitColumns:!0,enableCellNavigation:!0},u=null;grid=new Slick.Grid("[data-snac-grid]",o.data,l,c),$(window).resize(function(){grid.resizeCanvas()}),grid.onViewportChanged.subscribe(function(){var e=grid.getViewport();o.ensureData(e.top,e.bottom)}),grid.onSort.subscribe(function(e,t){o.setSort(t.sortCol.field,t.sortAsc?1:-1);var n=grid.getViewport();o.ensureData(n.top,n.bottom)}),o.onDataLoading.subscribe(function(){if(!u){u=$("<span class='loading-indicator'><label>Buffering...</label></span>").appendTo(document.body);var e=n;u.css("position","absolute").css("top",e.position().top+e.height()/2-u.height()/2).css("left",e.position().left+e.width()/2-u.width()/2)}u.show()}),o.onDataLoaded.subscribe(function(e,t){for(var n=t.from;n<=t.to;n++)grid.invalidateRow(n);grid.updateRowCount(),grid.render(),u.fadeOut()}),o.setSort("totalDocs",1),grid.onViewportChanged.notify()}});