$(function(){var e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"http://api.themoviedb.org/3/search/movie?query=%QUERY&api_key=470fd2ec8853e25d2f8d86f685d2270e",filter:function(e){return $.map(e.results,function(e){return{value:e.original_title}})}}});e.initialize(),$("#userInput").typeahead(null,{displayKey:"value",source:e.ttAdapter()}),$(".alphascroll a, .alphascroll li").tooltip(),$("label.advancedSearch").hide(),$("form.cpfSearch").hoverIntent(function(){$("label.advancedSearch").css("display","inline")},function(){"cpfdescription"===$("label.advancedSearch select").val()&&$("label.advancedSearch").fadeOut()});var t=!1;document.ontouchmove=function(e){t&&e.preventDefault()};var n=$("[data-snac-grid]");if(n.length){var i=new Slick.Data.RemoteModel(n.first().data("snac-grid")),o=function(e,t,n,i,o){return s="â˜… <a href='"+o.path.replace("default:","/xtf/view?docId=")+"'>"+o.identity+"</a>"},r=function(e,t,n,i,o){var r=o["facet-entityType"],a="";return"person"==r?a+="&#x1F466; ":"corporateBody"==r?a+="&#x1F3E2; ":"family"==r&&(a+="&#x1F46A; "),"hasBiogHist"==o["facet-recordLevel"]&&(a+="&#x24B7; "),o["facet-Wikipedia"]&&(a+="&#x24CC; "),a+=o["count-ArchivalResource"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},a=[{id:"identity",name:"Results",formatter:o,minWidth:300},{id:"icons",name:"",formatter:r,width:100,maxWidth:300}],l={editable:!0,enableAddRow:!1,enableColumnReorder:!1,forceFitColumns:!0,enableCellNavigation:!0},c=null;grid=new Slick.Grid("[data-snac-grid]",i.data,a,l),$(window).resize(function(){grid.resizeCanvas()}),grid.onViewportChanged.subscribe(function(){var e=grid.getViewport();i.ensureData(e.top,e.bottom)}),grid.onSort.subscribe(function(e,t){i.setSort(t.sortCol.field,t.sortAsc?1:-1);var n=grid.getViewport();i.ensureData(n.top,n.bottom)}),i.onDataLoading.subscribe(function(){if(!c){c=$("<span class='loading-indicator'><label>Buffering...</label></span>").appendTo(document.body);var e=n;c.css("position","absolute").css("top",e.position().top+e.height()/2-c.height()/2).css("left",e.position().left+e.width()/2-c.width()/2)}c.show()}),i.onDataLoaded.subscribe(function(e,t){for(var n=t.from;n<=t.to;n++)grid.invalidateRow(n);grid.updateRowCount(),grid.render(),c.fadeOut()}),i.setSort("totalDocs",1),grid.onViewportChanged.notify()}});