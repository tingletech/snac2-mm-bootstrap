$(function(){store.enabled;var e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:[{value:"Anthony, Susan B"},{value:"Berkeley Free Church"},{value:"Bernstein, Leonard, 1918-"},{value:"Block, Herbert, 1909-2001"},{value:"Bush, Vannevar, 1890-1974"},{value:"Cha, Theresa Hak Kyung"},{value:"Feynman, Richard Phillips, 1918-1988"},{value:"Fitzgerald, Ella, 1918-1996"},{value:"Frankfurter, Felix, 1882-1965"},{value:"Franklin, Benjamin, 1706-1790"},{value:"Fuller, R. Buckminster (Richard Buckminster), 1895-1983"},{value:"Hamilton, Alexander, 1757-1804"},{value:"Luce, Clare Boothe, 1903-1987"},{value:"Oppenheimer, J. Robert, 1904-1967"},{value:"Patton family"},{value:"Patton, George S. (George Smith), 1885-1945"},{value:"Sontag, Susan, 1933-2004"},{value:"Washington, George, 1732-1799"},{value:"Whitman, Walt, 1819-1892"},{value:"Wright, Lloyd, 1890-1978"},{value:"Yamada, Mitsuye"}],remote:{url:"http://socialarchive.iath.virginia.edu/xtf/search?autocomplete=yes;term=%QUERY",ajax:{dataType:"jsonp"},filter:function(e){return $.map(e,function(e){return{value:e}})}}});e.initialize(),$("#userInput").typeahead({minLength:3,highlight:!0},{source:e.ttAdapter()}),$(".alphascroll a, .alphascroll li").tooltip(),$("label.advancedSearch").hide(),$("form.cpfSearch").hoverIntent(function(){$("label.advancedSearch").css("display","inline")},function(){"cpfdescription"===$("label.advancedSearch select").val()&&$("label.advancedSearch").fadeOut()});var t=!1;document.ontouchmove=function(e){t&&e.preventDefault()};var n=$("[data-snac-grid]");if(n.length){var a=new Slick.Data.RemoteModel(n.first().data("snac-grid")),o="",r=function(){},i=function(e,t,n,a,r){return s=o+"<a href='"+r.path.replace("default:","/xtf/view?docId=")+"'>"+r.identity+"</a>"},l=function(e,t,n,a,o){var r=o["facet-entityType"],i="";return"person"==r?i+='<span class="icon-ind"></span>':"corporateBody"==r?i+='<span class="icon-org"></span>':"family"==r&&(i+='<span class="icon-fam"></span>'),"hasBiogHist"==o["facet-recordLevel"]&&(i+='<i class="icon-B"></i>'),o["facet-Wikipedia"]&&(i+='<i class="icon-W"></i>'),i},c=function(e,t,n,a,o){return out=o["count-ArchivalResource"].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),out+"&#160;&#160;"},u=[{id:"identity",name:"Results",minWidth:400,sortable:!0,formatter:i,asyncPostRender:r},{id:"icons",name:"Record types",formatter:l,width:100,maxWidth:150},{id:"collections",name:"Related Collections",width:100,maxWidth:150,formatter:c,sortable:!0,cssClass:"right"}],d={editable:!0,enableAddRow:!1,enableColumnReorder:!1,forceFitColumns:!0,enableCellNavigation:!0,enableAsyncPostRender:!0},f=null;grid=new Slick.Grid("[data-snac-grid]",a.data,u,d),$(window).resize(function(){grid.resizeCanvas()}),grid.onViewportChanged.subscribe(function(){var e=grid.getViewport();a.ensureData(e.top,e.bottom)}),grid.onSort.subscribe(function(e,t){a.setSort(t.sortCol.field,t.sortAsc?1:-1);var n=grid.getViewport();a.ensureData(n.top,n.bottom)}),grid.onClick.subscribe(function(e,t){console.log(e,t)}),a.onDataLoading.subscribe(function(){if(!f){f=$("<span class='loading-indicator'><label>Buffering...</label></span>").appendTo(document.body);var e=n;f.css("position","absolute").css("top",e.position().top+e.height()/2-f.height()/2).css("left",e.position().left+e.width()/2-f.width()/2)}f.show()}),a.onDataLoaded.subscribe(function(e,t){for(var n=t.from;n<=t.to;n++)grid.invalidateRow(n);grid.updateRowCount(),grid.render(),f.fadeOut()}),grid.setSortColumn("identity",!0),grid.onViewportChanged.notify()}}),window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!!t.document.createElementNS&&!!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect&&!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),a=function(a){var o=t.document.createElement("link"),r=t.document.getElementsByTagName("script")[0];o.rel="stylesheet",o.href=e[a&&n?0:a?1:2],r.parentNode.insertBefore(o,r)},o=new t.Image;o.onerror=function(){a(!1)},o.onload=function(){a(1===o.width&&1===o.height)},o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}},grunticon(["../stylesheets/grunticon/icons.data.svg.css","../stylesheets/grunticon/icons.data.png.css","../stylesheets/grunticon/icons.fallback.css"]);