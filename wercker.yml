box: wercker/rvm
# Build definition
build:
    # The steps that will be executed on build
    # See the Ruby section on the wercker devcenter:
    # http://devcenter.wercker.com/articles/languages/ruby.html
    steps:
        # Uncomment this to force RVM to use a specific Ruby version
        # - rvm-use:
        #       version: 2.1.0

        # A step that executes `bundle install` command
        - bundle-install

        # Execute a custom script step.
        - script:
            name: middleman build
            code: bundle exec middleman build --verbose

deploy:
    steps:
        # Execute the s3sync deploy step, a step provided by wercker
        - s3sync:
            key_id: $AWS_ACCESS_KEY_ID
            key_secret: $AWS_SECRET_ACCESS_KEY
            bucket_url: $AWS_BUCKET_URL
            source_dir: build/
